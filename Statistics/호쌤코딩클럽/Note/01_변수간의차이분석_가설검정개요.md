# 1. 가설검정 개요

- 통계적 추측의 하나로서, 모집단 실제의 값이 얼마가 된다는 주장과 관련해 표본의 정보를 사용해서 가설의 합당성 여부를 판정하는 과정

- 주로 변수의 평균들의 차이가 있는지 확인

- 두 그룹 간의 평균 차이를 비교하는 경우 T-Test를 수행하고, 세 개 이상의 그룹 간의 평균 차이를 비교하는 경우 분산분석(F-Test)를 수행

- 한편 범주형 변수 간의 관련성이나 독립성을 검정하기 위한 통계적 방법으로는 **카이제곱(Chi-Square) 검정**이 있음

# 2. 추정

- 표본으로부터 미지의 모수를 추측하는 것

## 2-1 점추정

- '모수가 특정한 값일 것'이라고 추정하는 것
- 표본의 평균, 중위수, 최빈값 등을 사용

## 2-2 구간추정(=가설검정)

- 점추정의 정확성을 보완하기 위해 믿음의 정도 하에서 모수가 특정한 구간에 있을 것이라고 선언하는 것

- 항상 추정량의 분포에 대한 전체가 주어져야 하고 구해진 구간 안에 모수가 있을 가능성의 크기 (신뢰구간)가 주어져야 함

- T검정, F검정 등의 방법이 있음

### 2-2-1 가설검정의 절차

가설 설정 -> 유의수준 설정 -> 검정통계량 산출 -> 기각/채택 판단

### 2-2-2 유의수준(significance level)

- 가설이 어느 정해진 수치를 벗어나면 귀무가설이 오류라고 인정할 것인가를 판단하는 기준

- 귀무가설을 기각하게 되는 확률의 크기

- 일반적으로 5%로 봄

### 2-2-3 유의확률(P-value)

- 귀무가설이 맞다는 전제 하에, 표본에서 실제로 관측된 통계치와 '같거나 더 극단적인' 통계치가 관측될 확률

- 관찰된 데이터가 귀무가설과 양립하는 정도를 0에서 1 사이의 수치로 표현한 것

- 유의확률이 작을수록 양립하는 정도가 작다고 봄

# 3. 가설검정의 가정

- 정규성, 등분산성, 독립성 확인

## 3-1. 데이터 정규성 확인

- 검정 대상인 두 그룹의 데이터는 정규분포를 따라야 함

- 또한 추론통계(모든 머신러닝 알고리즘)를 수행하기 위해서는 각각의 변수가 정규성을 충족하는지 확인해야 함

- 각 샘플 데이터는 정규분포를 따르는 모집단으로부터 추출되었는지 확인하기 위해 정규분포의 모양과 수집된 데이터 분포모양을 비교함

- 정규성을 검정하는 방법으로는 Shapiro Wilk 검정과 Normal Test가 있음

- 특히 Normal Test는 왜도와 첨도를 통한 기술통계량 판단 방법으로 널리 사용됨

### 3-1-1. 정규성 가설

- 귀무가설 : 정규분포의 모양과 수집된 데이터의 분포모양(표본자료의 분포)은 차이가 없다(같다)

- 대립가설 : 정규분포의 모양과 표본자료의 분포 모양은 차이가 있다 (다르다)

- 정규성은 귀무가설이 채택되어야 정규분포의 모양과 비슷하다고 할 수 있음 

### 3-1-2. 정규성을 판단하는 방법

- 실무에서는 정규성 검정 위배가 많음

- Shapiro Wilk 검정은 매우 엄격하고 이를 충족하기 위해서는 이상치가 없어야 하며 좌우 대칭도 거의 완전해야 하기 때문에 현실에서 이 기준에 맞는 데이터는 없다고 봄

- 따라서 실제로는 히스토그램을 그려보고, 왜도와 첨도의 통계량으로 판단하는 것이 현실적

- West 등(1995)의 연구에 따르면 정규분포의 기준은 |왜도| < 2, |첨도| < 7이면 정규분포에서 크게 벗어나지 않아 정규성 을 충족한다고 볼 수 있음

- 정규성 진단 방법

    - 히스토그램을 통한 직관적 판단 : 정규분포모양에서 크게 다르지 않을 경우(자료가 중심에 몰려 있어야 함)

    - 왜도와 첨도를 통한 기술통계량 판단: 왜도의 절대값이 2보다 작고 첨도의 절대값이 7보다 작은 경우 

    - 정규성에 대한 가설검정: p > 0.05 (귀무가설 충족)


- 정규성을 파악해보는 중요한 이유는 평균이 평균으로서 자격이 있는지 보는 것, 왜냐하면 대부분의 통계분석은 바로 평균 중심성 간의 차이나 관계를 파악하는 것이기 때문

- scipy 패키지의 Normal Test를 통해 진행함

### 3-1-3. 정규분포가 아닌 경우 

- 데이터에 대해 로그 변환이나 제곱근 변환을 적용하여 정규분포에 가깝게 변환해야 함

## 3-2. 데이터의 등분산성 확인

- 등분산성 가정은 각각의 그룹 또는 조건에서 오차의 분산이 동일하다는 가정으로 주로 분산분석(ANOVA) 및 회귀분석에서 사용됨

- 등분산성이 있다면, 통계적 분석 결과가 신뢰성 있고 정확하며 해석이 쉬움

- 그러나 등분산성이 깨진다면, 잘못된 결과를 얻을 수 있기 때문에 등분산성을 확인하고 적절한 조치를 취하는 것이 중요 

- 등분산성은 주로 잔차(Residual)의 분포를 통해 확인

- 분석을 진행하기 전에 등분산성을 검정하고, 등분산성이 깨진 경우에는 적절한 변환을 시도하거나 다른 분석 방법을 사용하는 것이 좋음 

### 3-2-1. 정규분포를 따르는 데이터의 검정 - Barlett 검정

- 정규분포를 따르는 데이터의 집단 간 분산이 같은지 다른지 여부를 알아볼 때 사용

- Barlett검정은 두 집단 뿐만 아니라 세 집단 이상에서도 사용할 수 있음 

- 모든 변수가 정규분포를 따른다는 가정 하에서만 사용 가능

- 귀무가설 : 집단 간 분산의 차이가 없다
- 대립가설 : 집단 간 분산의 차이가 있다

### 3-2-2. 정규분포를 따르지 않는 데이터의 검정 - 레빈 검정(Levene's Test)

- 다른 등분산성 검정 방법과 달리 레빈 검정은 정규성 가정이 필요 없기 때문에 비모수적인 방법으로도 적용할 수 있음 

- 귀무가설: 집단 간 분산의 차이가 없음
- 대립가설: 집단 간 분산의 차이가 있음

- 레빈 검정 외에 Brown-Forsythe 검정을 사용할 수도 있으나 레빈 검정이 좀 더 일반적

## 3-3. 데이터의 독립성 확인

- 시계열 데이터가 아닌 경우, 데이터의 독립성은 주로 관찰치 간에 상관관계가 없는지 확인하는 것으로 파악

- 일반적으로 데이터 수집 시에 독립성이 확보되므로 추가적인 검정이 필요하지 않을 수 있음

# 4. T검정 (T-test)

- 모집단의 분산이나 표준편차를 알지 못할 때, 표본으로부터 추정된 분산이나 표준펴녀차를 이용하여 두 모집단의 평균에 통계적으로 유의한 차이가 있는지 알아볼 때 사용하는 통계분석 기법

- 모집단에 대한 가설을 설정한 뒤 표본 고나찰을 통해 그 가설의 채택여부를 결정

    - ex: 새로 개발한 백신이 감기를 예방하는 데 효과가 있는지 여부를 결정하는 분석

- 귀무가설이 옳다는 전제 하에 검정통계량의 값을 구한 후, 이 값이 나타날 가능성의 크기에 의해 귀무가설의 채택여부를 결정

- 통계적인 유의성을 검정하는 것으로, 유의성 검정(Significance Test)이라고도 함

## 4-1. T검정의 종류

- 단일 표본 T-검정

    - 하나의 모집단 평균이 이전보다 커졌는지/작아졌는지/달라졌는지를 통계적으로 알아보기 위해 사용

- 독립 표본 T-검정

    - 서로 다른 두 개의 그룹 간 평균의 차이가 유의미한지 여부를 판단

- 대응 표본 T-검정

    - 표본의 각 사례마다 대응하는 2개의 관측치를 통해 판단

    - 쉽게 말해 한 집단에 어떤 작용이 가해졌을 때에 대한 before, after를 비교

# 5. F검정 (분산분석, ANOVA)

- 세 개 이상의 집단 간 평균의 차이를 검증하기 위해 사용

- 두 집단의 평균을 비교할 때는 t검정을 쓰고, 3개 이상의 집단의 평균을 비교할 때는 분산 분석을 수행한다고 볼 수 있음 

- 두 집단의 평균을 비교하기 위해 분산분석을 사용할 경우 독립표본 T검정과 동일함

- 분산분석의 주요 목표는 두 가지 이상의 집단 간의 평균이 서로 같은지를 판단하는 것. 

- 그래서 귀무가설과 대립가설을 세울 때는 평균이 "같은지", "다른지"만 나타나는데, 가설검정과 달리 방향은 중요하지 않기 때문에 가설검정처럼 "크다"와 "작다"는 파악하지 않음 

- 파이썬에서는 scipy.stats 패키지를 통해 분산분석을 수행하기 위한 요건을 검사하고, statsmodels패키지를 활용하여 분산분석을 수행

## 5-1. F검정의 종류

- 일원분산분석(One-Way ANOVA)

    - 하나의 독립변수에 대한 종속변수의 평균 차이를 분석하는 방법 
    
    - 세 가지 다른 교육 방법에 따른 학생들의 성적 차이

- 이원분산분석(Two-Way ANOVA)
    
    - 두 개의 독립변수에 대한 종속변수의 평균 차이를 분석하는 방법으로 두 가지 요인이 결과변수에 미치는 영향을 동시에 조사할 수 있음 

    - 교육 방법과 성별에 따른 학생들의 성적 차이를 분석

## 5-2. F검정의 가설

- 귀무가설 : 모든 집단의 평균이 같다

- 대립가설 : 어떤 집단의 평균이 다름

- 대립가설의 요점은 "어떤 집단의 평균이 다르다"임

    - A와 B가 다른지, B와 C가 다른지 분산분석으로 알 수 없음

    - 사후 분석으로 확인해야 함

## 참고 문헌

- West, S. G., Finch, J. F & Curran, P. J (1995). Structural equation models with nonnormal variables: Problems and remedies. In R.H. Hoyle(Ed.) Structural equation modeling: Concepts, issues, and applications (p.56-75). Sage Publications. Inc.

- egoism2002, "정규성이 꼭 충족되어야 하나요?", 사회와 인간을 보는 눈, 2021-05-12 (https://blog.naver.com/egoism2002/222348179768)